<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <!-- Standard Meta -->
        <meta charset="utf-8">
        <meta name="author" content="Vito Van">
        <meta name="theme-color" content="#CC0000">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
        <link rel="icon" type="image/png" href="https://vitovan.com/favicon.png">
        <link rel="stylesheet" type="text/css" href="lispweb3_files/app.css">
        <link rel="stylesheet" type="text/css" href="lispweb3_files/github-markdown.css">
        <title>Lisp для современного Веб</title>
        <script async="" src="lispweb3_files/analytics.js"></script><script>
         (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
             (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                                  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
         ga('create', 'UA-69347509-2', 'auto');
         ga('send', 'pageview');
        </script>
    </head>
    <body>
        <div class="panel">
            <ul>
                <li><a href="https://vitovan.com/index.html">Home</a></li>
                <li class="current"><a href="https://vitovan.com/list.html">List</a></li>
                <li><a href="https://vitovan.com/about.html">About</a></li>
                <li><a href="https://vitovan.com/rss.xml">RSS</a></li>
            </ul>
        </div>
        <div class="container">
            <div class="head">
                <h1><a href="https://vitovan.com/index.html">Vito Van</a></h1>
            </div>
            <div class="content markdown-body">

<h1>
<a name="lisp-for-the-modern-web" class="anchor" href="#lisp-for-the-modern-web" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Lisp для современного Веб</h1>

<p>2015/08, revision: 2015/08, 2015/09, 2016/08</p>

<blockquote>

<p>Лисп - это не язык, это строительный материал.</p>

</blockquote>

<p>-  Alan Kay</p>

<h3>
<a name="what-to-expect" class="anchor" href="#what-to-expect" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Чего ожидать</h3>

<p>В этой статье рассказывается, как с нуля создать современное веб-приложение с использованием
Common Lisp в серверной части.</p>

<p>Возможно, вам потребуются некоторые знания о <a href="https://en.wikipedia.org/wiki/Front_end_development" rel="nofollow">Front End Development</a>(разработки клиентской части),
потому что мы не будем объяснять шаги по созданию клиента. </p>

<h3>
<a name="why-lisp-again" class="anchor" href="#why-lisp-again" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Почему Лисп? Снова</h3>

<p><strong>Он превосходен.</strong>.</p>

<p>Я не думаю, что нам нужна другая причина для использования Lisp, не так ли? 
Жизнь коротка, давайте будем крутыми!</p>

<p>Прошло более полувека с момента появления Лиспа, он как <a href="https://en.wikipedia.org/wiki/One_Ring" rel="nofollow">Единое Кольцо</a> в Средиземье. Тот, кто овладел чарами Лиспа, 
снова будет править миром. </p>

<p><strong>Другие причины.</strong>.</p>

<p>Если вам нужны еще какие-то причины, помимо великолепия Лиспа, вот несколько 
<a href="http://www.paulgraham.com/quotes.html" rel="nofollow">цитат</a> и 
<a href="http://www.paulgraham.com/lisp.html" rel="nofollow">статей</a> о Lisp, 
наслаждайтесь ими.</p>

<h3>
<a name="lets-do-it" class="anchor" href="#lets-do-it" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Давай сделаем это</h3>

<p>Что делать?</p>

<p>Мы собираемся «создать современное веб-приложение с Common Lisp в бэкэнде», как упоминалось ранее.</p>

<p>В последнее время многие люди создают веб-приложения <strong><code>Сервер с выводом 
JSON</code></strong>  и <strong><code>Клиент с HTML5 + JavaScript</code></strong>. 
И мы поступим так же.</p>

<p>Поскольку у вас есть(наверное) некоторые навыки фронтенд-разработки, 
мы сосредоточимся на серверной части, а клиентская часть будет предоставлена 
вам в качестве исходного кода.</p>

<h3>
<a name="the-steps" class="anchor" href="#the-steps" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Шаги</h3>
<ul>
<li><a href="#hello-lisp">Hello Lisp!</a></li>
<li><a href="#hello-world">Hello World!</a></li>
<li><a href="#lets-be-json">Давайте будем JSON</a></li>
<li><a href="#data-storage">Хранилище данных</a></li>
<li><a href="#modern-client">Современный клиент</a></li>
</ul>
<h4>
<a name="hello-lisp" class="anchor" href="#hello-lisp" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Hello, Lisp!</h4>

<p>Мы предполагаем, что вы ничего не знаете о Lisp, так что давайте поздороваемся:</p>

<ul>
<li>

<p> Перейдите на  <a href="http://sbcl.org/" rel="nofollow">sbcl.org</a>, и откройте страницу
 <a href="http://sbcl.org/platform-table.html" rel="nofollow">Download</a>,  
выберите свою платформу и загрузите двоичный файл.</p>

</li>
<li>

<p>Затем следуйте <a href="http://sbcl.org/getting.html" rel="nofollow">этой инструкции</a>, 
чтобы установить и запустить его.</p>

</li>
<li>

<p> Хорошо, теперь у вас есть <a href="http://www.cliki.net/REPL" rel="nofollow">REPL</a>!</p>

</li>
</ul>
<blockquote>

<p>Это SBCL 1.2.7, реализация ANSI Common Lisp.</p>

</blockquote>
<blockquote>

<p>More information about SBCL is available at <a href="http://www.sbcl.org/" rel="nofollow">http://www.sbcl.org/</a>.</p>

</blockquote>
<blockquote>
</blockquote>
<blockquote>

<p>SBCL is free software, provided as is, with absolutely no warranty.</p>

</blockquote>
<blockquote>

<p>It is mostly in the public domain; some portions are provided under</p>

</blockquote>
<blockquote>

<p>BSD-style licenses.  See the CREDITS and COPYING files in the</p>

</blockquote>
<blockquote>

<p>distribution for more information.</p>

</blockquote>
<blockquote>

<p>*</p>

</blockquote>

<p>Прежде чем мы начнем писать код, давайте поговорим об основах грамматики Лиспа. 
Многие говорят: «Это странно!», Но это тоже очаровательная часть.</p>

<p>Вы можете представить себе грамматику Лиспа, как <a href="http://www.webpacman.com/pacman.php" rel="nofollow">Pac Man</a>, поедающий точки: <code>ᗧ ••••</code>, и здесь нет никаких призраков. 
Pac Man - это функция в Лиспе, а точки - аргументы. После того, как Pac Man съел все точки 
(функция выполняется со всеми этими аргументами), он превратился в точку: •. и точка может 
быть съедена другим Pac Man-ом.</p>

<p>Итак, вы можете представить себе такую программу на Лиспе:</p>

<div class="highlight highlight-source-lisp">
<pre><span class="pl-c"><span class="pl-c">;</span>;Day 1, we created Pac Men and dots</span>
(ᗧ• (ᗧ••••
 (ᗧ••
 (ᗧ•••))))
<span class="pl-c"><span class="pl-c">;</span>;Day 2, The innermost Pac Man eat up all the dots in front of him/her</span>
<span class="pl-c"><span class="pl-c">;</span>;and, turns into a dot </span>
(ᗧ• (ᗧ••••
 (ᗧ••
 •)))
<span class="pl-c"><span class="pl-c">;</span>;Day 3, Eating is not stopping</span>
(ᗧ• (ᗧ••••
•))
<span class="pl-c"><span class="pl-c">;</span>;Day 4, The last Pac Man</span>
(ᗧ• •)
<span class="pl-c"><span class="pl-c">;</span>;Day 5, Finally, Pac Man is just another dot</span>
•</pre>
</div>

<p>Да они же просто Pac Man и точки! Когда есть несколько Pac Men и точек, 
сначала будет есть самый внутренний Pac Man, и затем превратится в точку, ожидающую, 
чтобы ее съел другой Pac Man. Забавно, правда?
</p>

<p>Теперь вернемся к REPL:</p>

<ul>
<li>Наберите <code>(format t "Hello, Lisp!")</code>, и нажмите <kbd>Enter</kbd>
</li>
</ul>
<blockquote>

<p>* (format t "Hello, Lisp!")</p>

</blockquote>
<blockquote>

<p><strong>Hello, Lisp!</strong></p>

</blockquote>
<blockquote>

<p>NIL</p>

</blockquote>
<blockquote>

<p>*</p>

</blockquote>
<ul>
<li>Теперь вы изучили Lisp!</li>
</ul>

<p>"ВЫ ДОЛЖНО БЫТЬ ДЕТИ !!", да. А теперь давайте сделаем что-нибудь посложнее:</p>

<ul>
<li>Откройте файл, вставьте код ниже и сохраните его как  <code>say-hello.lisp</code>:</li>
</ul>
<div class="highlight highlight-source-lisp"><pre>(<span class="pl-k">defun</span> <span class="pl-en">say-hello</span> (to)
 (<span class="pl-c1">format</span> <span class="pl-c1">t</span> <span class="pl-s"><span class="pl-pds">"</span>Hello, ~a<span class="pl-pds">"</span></span> to))</pre></div>
<ul>
<li>

<p>Откройте терминал и перейдите в текущий каталог</p>

</li>
<li>

<p>Наберите <code>sbcl --load say-hello.lisp</code>, и нажмите <kbd>Enter</kbd></p>

</li>
</ul>
<blockquote>

<p>[vito@laptop lispweb3]$ sbcl --load say-hello.lisp</p>

</blockquote>
<blockquote>

<p>This is SBCL 1.2.7, an implementation of ANSI Common Lisp.</p>

</blockquote>
<blockquote>

<p>More information about SBCL is available at <a href="http://www.sbcl.org/" rel="nofollow">http://www.sbcl.org/</a>.</p>

</blockquote>
<blockquote>
</blockquote>
<blockquote>

<p>SBCL is free software, provided as is, with absolutely no warranty.</p>

</blockquote>
<blockquote>

<p>It is mostly in the public domain; some portions are provided under</p>

</blockquote>
<blockquote>

<p>BSD-style licenses.  See the CREDITS and COPYING files in the</p>

</blockquote>
<blockquote>

<p>distribution for more information.</p>

</blockquote>
<blockquote>

<p>*</p>

</blockquote>
<ul>
<li>Тогда вы получите REPL с загруженным файлом. Наберите <code>(say-hello "Vito")</code>, 
и нажмите <kbd>Enter</kbd>
</li>
</ul>
<blockquote>

<p>* (say-hello "Vito")</p>

</blockquote>
<blockquote>

<p>Hello, Vito</p>

</blockquote>
<blockquote>

<p>NIL</p>

</blockquote>
<blockquote>

<p>*</p>

</blockquote>
<ul>
<li>Сейчас, вы увидели как здороваться со мной с помощью Лисп!</li>
</ul>

<p><strong>Хорошо, что мы сделали?</strong></p>

<p>Во-первых, когда мы набираем текст <code>(format t "Hello, Lisp!")</code>, Мы вызываем 
функцию с именем <code>format</code> и передаем ей два аргумента: <code>t</code> и
<code>"Hello, Lisp!"</code>. Что же тогда такое функция <code>format</code>?</p>

<p>Вот документ: <a href="http://www.lispworks.com/documentation/lw50/CLHS/Body/f_format.htm" rel="nofollow">CLHS: Function FORMAT</a>, а вот <a href="http://www.gigamonkeys.com/book/a-few-format-recipes.html" rel="nofollow">несколько рецептов FORMAT</a>. Обычно мы можем погуглить 
по этим ключевым словам: <a href="https://www.google.com/search?q=common+lisp+format" rel="nofollow"><em>common lisp format</em></a>, и спасибо Google, мы всегда получим ответ. </p>

<blockquote>

<p>......</p>

</blockquote>
<blockquote>

<p>format destination control-string &amp;rest args =&gt; result</p>

</blockquote>
<blockquote>

<p>Arguments and Values:</p>

</blockquote>
<blockquote>

<p><strong>destination---nil, t, a stream, or a string with a fill pointer.</strong></p>

</blockquote>
<blockquote>

<p><strong>control-string---a format control.</strong></p>

</blockquote>
<blockquote>

<p>args---format arguments for control-string.</p>

</blockquote>
<blockquote>

<p>result---if destination is non-nil, then nil; otherwise, a string.</p>

</blockquote>
<blockquote>

<p>......</p>

</blockquote>

<p>- <a href="http://www.lispworks.com/documentation/lw50/CLHS/Body/f_format.htm" rel="nofollow">CLHS: Function FORMAT</a></p>

<blockquote>

<p>...... the destination for the output, can be T, NIL, a stream, or a string with a fill pointer. <strong>T is shorthand for the stream <em>STANDARD-OUTPUT</em></strong>, while NIL causes  ......</p>

</blockquote>
<blockquote>

<p>...... The second argument, the control string, is, in essence, a 
program in the FORMAT language. ...... Most of FORMAT's directives 
......</p>

</blockquote>
<blockquote>

<p>FORMAT Directives</p>

</blockquote>
<blockquote>

<p>......</p>

</blockquote>

<p>- <a href="http://www.gigamonkeys.com/book/a-few-format-recipes.html" rel="nofollow">A Few FORMAT Recipes</a></p>

<p>Теперь мы знаем, что первый аргумент <code>(format t "Hello, Lisp!")</code> - это пункт
назначения, когда мы передаем его <code>t</code>, это означает <code>*STANDARD-OUTPUT*</code>. 
Мы также знаем, что второй аргумент <code>(format t "Hello, Lisp!")</code> - это управляющая
строка, которая, как и шаблон, без директив, представляет собой просто строку.</p>

<p>Итак, <code>(format t "Hello, Lisp!")</code> Означает вывод строки <code>"Hello, Lisp!"</code> 
в стандартный вывод, затем вернёт <code>nil</code> (на данный момент вы можете предположить, что 
<code>t</code> означает <code>true</code>, а <code>nil</code> означает <code>false</code> в Lisp).
</p>

<p>Во-вторых, мы написали файл с: </p>

<div class="highlight highlight-source-lisp"><pre>(<span class="pl-k">defun</span> <span class="pl-en">say-hello</span> (to)
 (<span class="pl-c1">format</span> <span class="pl-c1">t</span> <span class="pl-s"><span class="pl-pds">"</span>Hello, ~a<span class="pl-pds">"</span></span> to))</pre></div>

<p>Что ж, мы знаем, что <code>(format t "Hello, ~a" to)</code> означает замену директивы 
<code>~a</code> значением переменной <code>to</code>, а затем вывод их на стандартный вывод. 
Но что означает <code>(defun say-hello (to)</code></p>

<p>Давайте попробуем google: <a href="https://www.google.com/search?q=common+lisp+defun" rel="nofollow"><em>common lisp defun</em></a>.</p>

<p>Итак, мы получили это: <a href="http://www.lispworks.com/documentation/lw50/CLHS/Body/m_defun.htm" rel="nofollow">CLHS: Macro DEFUN</a> и это: <a href="http://www.gigamonkeys.com/book/functions.html" rel="nofollow">Функции</a>.</p>

<p>Прочитав их, мы знаем, что <code>defun</code> - это макрос, который используется для 
создания функции. Первый аргумент <code>defun</code> - это имя функции, а второй аргумент 
<code>defun</code> - это аргументы функции, и, как правило, остальное будет телом функции.</p>

<p>Итак, это означает, что мы только что создали функцию с именем <code>say-hello</code> 
и принимает один аргумент <code>to</code>. Когда функция вызывается, она объединяет значение
переменной <code>to</code> со строкой <code>"Hello, "</code>, а затем выводит их на стандартный
вывод. Это может быть версия JavaScript: </p>

<div class="highlight highlight-source-js"><pre><span class="pl-c">//It seems there is no string format function in JavaScript, so...</span>
<span class="pl-k">function</span> <span class="pl-en">sayHello</span><span class="pl-kos">(</span><span class="pl-s1">to</span><span class="pl-kos">)</span><span class="pl-kos">{</span>
    <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">"Hello, ~a"</span><span class="pl-kos">.</span><span class="pl-en">replace</span><span class="pl-kos">(</span><span class="pl-s">"~a"</span><span class="pl-kos">,</span><span class="pl-s1">to</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span></pre></div>
<h4>
<a name="hello-world" class="anchor" href="#hello-world" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Hello World!</h4>

<p>Теперь вы научились программировать на Common Lisp, но никто, кроме вас и меня 
про это не знает, и это плохо.</p>

<p>Итак, давайте поздороваемся с миром.</p>

<blockquote>

<p>Если я и видел дальше, то это потому, что я стоял на плечах гигантов.</p>

</blockquote>

<p>- Isaac Newton</p>

<p>Встречаем гигантов: </p>

<ul>
<li>

<p>Зайдите на <a href="http://quicklisp.org/" rel="nofollow">quicklisp.org</a>, следуйте
<a href="https://www.quicklisp.org/beta/#installation" rel="nofollow">инструкциям по установке</a>
(да, абзац с темным фоном, скопируйте и вставьте и выполните все жирные строки в вашем терминале),
установите его.</p>

</li>
<li>

<p>  Откройте файл, вставьте код ниже и сохраните его как  <code>server.lisp</code>:</p>

</li>
</ul>
<div class="highlight highlight-source-lisp"><pre>(ql:quickload :hunchentoot)
(hunchentoot:start (make-instance 'hunchentoot:easy-acceptor :port <span class="pl-c1">4242</span>))</pre></div>
<ul>
<li>

<p>Откройте терминал и перейдите в текущий каталог</p>

</li>
<li>

<p>Наберите <code>sbcl --load server.lisp</code>, и нажмите <kbd>Enter</kbd></p>

</li>
<li>

<p>После загрузки откройте эту ссылку в своем любимом браузере: <a href="http://localhost:4242/" rel="nofollow">http://localhost:4242/</a></p>

</li>
<li>

<p> ВЫ ПРОСТО СОЗДАЛИ САЙТ С ПОМОЩЬЮ LISP!</p>

</li>
<li>

<p>ВЫ ВЕЛИКОЛЕПНЫ!!!</p>

</li>
</ul>

<p>Хорошо, успокоимся, и давайте сделаем что-нибудь, чтобы люди знали, что это 
<em>ВЫ</em> создали веб-сайт с помощью Lisp. Добавьте приведенный ниже код в свой файл 
<code>server.lisp</code>: </p>

<div class="highlight highlight-source-lisp"><pre> <span class="pl-c"><span class="pl-c">;</span>;remeber to change Vito to your name.</span>
(hunchentoot:define-easy-handler (say-hello :uri <span class="pl-s"><span class="pl-pds">"</span>/hello<span class="pl-pds">"</span></span>) (name)
 (<span class="pl-c1">setf</span> (hunchentoot:content-type*) <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>)
 (<span class="pl-c1">format</span> <span class="pl-c1">nil</span> <span class="pl-s"><span class="pl-pds">"</span>Hello, ~a! I am Vito! ~%I build a website with Lisp!!!<span class="pl-pds">"</span></span> name))</pre></div>
<ul>
<li>

<p>щелкните <kbd>Ctrl</kbd> + <kbd>d</kbd> или наберите <code>(quit)</code> и нажмите
<kbd>Enter</kbd> для выхода из текущей REPL.</p>

</li>
<li>

<p>В терминале введите <code>sbcl --load server.lisp</code>, 
 и снова нажмите  <kbd>Enter</kbd>.</p>

</li>
<li>

<p>После загрузки проверьте здесь: <a href="http://localhost:4242/hello?name=World" rel="nofollow">http://localhost:4242/hello?name=World</a></p>

</li>
<li>

<p>ДА, <strong><em>ВЫ</em></strong> только что поздоровались с миром! С помощью <strong><em>LISP</em></strong> !</p>

</li>
</ul>

<p><strong>Что мы сделали?</strong></p>

<p>Это не так уж и сложно понять, не правда ли? </p>

<p>Во-первых, мы должны поблагодарить Quicklisp, это менеджер библиотек для Common Lisp, 
и он имеет  <a href="https://www.quicklisp.org/beta/releases.html" rel="nofollow">более 1,200 библиотек</a>, после его установки вы можете ездить на велосипеде БЕЗ РУК!
</p>

<p>Во-вторых, мы должны поблагодарить Эди Вайца, он чрезвычайно крутой и очаровательный 
Лиспер на этой планете. Вы встретите так много проектов Lisp под волшебными руками 
Эди Вейца после того, как некоторое время будете серфить в мире Lisp, и тогда вы будете 
покорены очарованием кода. Хорошо, после слов похвалы, мы просто использовали 
<a href="http://weitz.de/hunchentoot/" rel="nofollow">Hunchentoot</a> <a href="#fn1">[1]</a> 
в качестве сервера, он хорошо задокументирован, вам он понравится.</p>

<p>Мы просто загружаем <a href="http://weitz.de/hunchentoot/" rel="nofollow">Hunchentoot</a> 
с помощью Quicklisp, например: <code>(ql:quickload :hunchentoot)</code>, а затем запускаем 
сервер Hunchentoot на порту 4242: <code>(hunchentoot:start (make-instance 'hunchentoot:easy-acceptor :port 4242))</code>. Наконец, мы определили обработчик HTTP с помощью Hunchentoot's 
<a href="http://weitz.de/hunchentoot/#define-easy-handler" rel="nofollow">define-easy-handler</a>.
</p>

<p>Для дальнейшего использования информацию о Hunchentoot вы найдете в этом 
<a href="http://weitz.de/hunchentoot" rel="nofollow">документе</a>. </p>

<h4>
<a name="lets-be-json" class="anchor" href="#lets-be-json" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Давайте будем JSON</h4>

<p>Да да, знаю, знаю. Команда Front Team не обрадуется, если мы дадим им простой 
текстовый ответ, им всем нравится <a href="http://json.org/" rel="nofollow">JSON</a>.</p>

<p>Итак, как это сделать в Common Lisp?</p>

<ul>
<li>Откройте файл, вставьте код ниже, затем сохраните его как  <code>json-server.lisp</code>:</li>
</ul>
<div class="highlight highlight-source-lisp"><pre>(ql:quickload '(hunchentoot cl-json))
(hunchentoot:start (make-instance 'hunchentoot:easy-acceptor :port <span class="pl-c1">4242</span>))
<span class="pl-c"><span class="pl-c">;</span>;Create a class called people.</span>
<span class="pl-c"><span class="pl-c">;</span>;What? CLASS!!??</span>
<span class="pl-c"><span class="pl-c">;</span>;Yes, it is a class. Lisp is not just a Functional Programming Language.</span>
<span class="pl-c"><span class="pl-c">;</span>;Remember? it's a building material!!</span>
(<span class="pl-k">defclass</span> <span class="pl-en">people</span>()
  ((name :accessor name
         :initarg :name)
   (language :accessor language
             :initarg :language)
   (bio :accessor bio
        :initarg :bio)))
<span class="pl-c"><span class="pl-c">;</span>;Make a people.</span>
(<span class="pl-k">defvar</span> <span class="pl-en">me</span>
  (make-instance 'people
                 :name <span class="pl-s"><span class="pl-pds">"</span>Vito Van<span class="pl-pds">"</span></span>
                 :language <span class="pl-s"><span class="pl-pds">"</span>Lisp<span class="pl-pds">"</span></span>
                 :bio <span class="pl-s"><span class="pl-pds">"</span>I have no job, I'm dying. Someone hire me, I can eat.<span class="pl-pds">"</span></span>))
<span class="pl-c"><span class="pl-c">;</span>;Send me to the world, in JSON.</span>
(hunchentoot:define-easy-handler (say-me :uri <span class="pl-s"><span class="pl-pds">"</span>/me<span class="pl-pds">"</span></span>) ()
  (<span class="pl-c1">setf</span> (hunchentoot:content-type*) <span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span>)
  (json:encode-json-to-string me))
<span class="pl-c"><span class="pl-c">;</span>;Dynamic build a people, and response back in JSON.</span>
(hunchentoot:define-easy-handler (say-you :uri <span class="pl-s"><span class="pl-pds">"</span>/you<span class="pl-pds">"</span></span>) (name)
  (<span class="pl-c1">setf</span> (hunchentoot:content-type*) <span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span>)
  (json:encode-json-to-string
   (make-instance
    'people
    :name name
    :language <span class="pl-s"><span class="pl-pds">"</span>English<span class="pl-pds">"</span></span>
    :bio (<span class="pl-c1">format</span> <span class="pl-c1">nil</span> <span class="pl-s"><span class="pl-pds">"</span>I am ~a's colon. I get cancer, I kill ~a. <span class="pl-pds">"</span></span> name name))))</pre></div>
<ul>
<li>

<p>Закройте все остальные REPL, затем загрузите файл <code>sbcl --load json-server.lisp</code>!</p>

</li>
<li>

<p>Проверьте здесь: <a href="http://localhost:4242/me" rel="nofollow">http://localhost:4242/me</a>, and here: <a href="http://localhost:4242/you?name=Jack" rel="nofollow">http://localhost:4242/you?name=Jack</a></p>

</li>
</ul>

<p>Да, вы это сделали! Смотри, мама, это JSON!</p>

<p>На данный момент я не думаю, что вам больше нужно объяснять подробности. 
Мы просто создали класс, сделали его экземпляр и закодировали в JSON, а затем 
отправили обратно в браузер. Вот документы о  <code>defclass</code> и <code>cl-json</code>:</p>

<ul>
<li>

<p><a href="http://clhs.lisp.se/Body/m_defcla.htm" rel="nofollow">CLHS: Macro DEFCLASS</a> и <a href="http://www.gigamonkeys.com/book/object-reorientation-classes.html" rel="nofollow">Object Reorientation: Classes</a></p>

</li>
<li>

<p><a href="https://common-lisp.net/project/cl-json/" rel="nofollow">CL-JSON</a></p>

</li>
</ul>
<h4>
<a name="data-storage" class="anchor" href="#data-storage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Хранилище данных</h4>

<p>Где мы сейчас находимся?
</p>

<p>Мы сделали <strong><code>Сервер с выводом JSON</code></strong>, это большое дело. 
Но мы еще никогда не хранили никаких данных. Итак, давайте дадим ему шанс, кто 
когда-либо посещал  <a href="http://localhost:4242/you?name=Jack" rel="nofollow">http://localhost:4242/you?name=Jack</a>.</p>

<p>Вот исходный код этого запроса: </p>

<div class="highlight highlight-source-lisp"><pre><span class="pl-c"><span class="pl-c">;</span>;Dynamic build a people, and response back in JSON.</span>
(hunchentoot:define-easy-handler (say-you :uri <span class="pl-s"><span class="pl-pds">"</span>/you<span class="pl-pds">"</span></span>) (name)
  (<span class="pl-c1">setf</span> (hunchentoot:content-type*) <span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span>)
  (json:encode-json-to-string
   (make-instance
    'people
    :name name
    :language <span class="pl-s"><span class="pl-pds">"</span>English<span class="pl-pds">"</span></span>
    :bio (<span class="pl-c1">format</span> <span class="pl-c1">nil</span> <span class="pl-s"><span class="pl-pds">"</span>I am ~a's colon. I get cancer, I kill ~a. <span class="pl-pds">"</span></span> name name))))</pre></div>

<p>Мы могли бы сделать это лучше: </p>

<div class="highlight highlight-source-lisp"><pre><span class="pl-c"><span class="pl-c">;</span>;Store the people instance</span>
(<span class="pl-k">defun</span> <span class="pl-en">store-people</span> (people)
  ((ᗧ• people •))
  people)
<span class="pl-c"><span class="pl-c">;</span>;Make a people instance by name</span>
(<span class="pl-k">defun</span> <span class="pl-en">make-people</span> (name)
  (make-instance
   'people
   :name name
   :language <span class="pl-s"><span class="pl-pds">"</span>English<span class="pl-pds">"</span></span>
   :bio (<span class="pl-c1">format</span> <span class="pl-c1">nil</span> <span class="pl-s"><span class="pl-pds">"</span>I am ~a's colon. I get cancer, I kill ~a. <span class="pl-pds">"</span></span> name name)))
<span class="pl-c"><span class="pl-c">;</span>;Dynamic build a people, and response back in JSON.</span>
(hunchentoot:define-easy-handler (say-you :uri <span class="pl-s"><span class="pl-pds">"</span>/you<span class="pl-pds">"</span></span>) (name)
  (<span class="pl-c1">setf</span> (hunchentoot:content-type*) <span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span>)
  (json:encode-json-to-string
   (store-people
    (make-people name))))</pre></div>

<p>Мы просто добавили функцию <code>make-people</code>, она делает код лаконичным. 
И мы знаем, что Pac Man в коде толком не сработает, давайте исправим.</p>

<p>Каков общий смысл хранения данных? Продукты баз данных, да. Но сегодня мы не будем использовать
базу данных, потому что:</p>

<ul>
<li>

<p>Это не круто, все ими пользуются.</p>

</li>
<li>

<p>Это сложно, мы должны научиться использовать продукт базы данных.</p>

</li>
<li>

<p> У меня есть данные в памяти, почему бы просто не сделать их КАК ЕСТЬ?</p>

</li>
</ul>

<p>Итак, мы могли бы сделать это так: </p>

<div class="highlight highlight-source-lisp"><pre>(<span class="pl-k">defvar</span> <span class="pl-smi">*people-list*</span> <span class="pl-c1">nil</span>)
<span class="pl-c"><span class="pl-c">;</span>;Store the people instance</span>
(<span class="pl-k">defun</span> <span class="pl-en">store-people</span> (people)
  (push people <span class="pl-smi">*people-list*</span>)
  people)</pre></div>

<p>Да! Мы просто сохраняем людей в переменной <code>*people-list*</code>! Как отправить список людей в браузер? </p>

<div class="highlight highlight-source-lisp"><pre>(hunchentoot:define-easy-handler (people :uri <span class="pl-s"><span class="pl-pds">"</span>/people<span class="pl-pds">"</span></span>) (name)
  (<span class="pl-c1">setf</span> (hunchentoot:content-type*) <span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span>)
  (json:encode-json-to-string
   <span class="pl-smi">*people-list*</span>))</pre></div>

<p>Вот минимальная часть для проверки памяти: </p>

<div class="highlight highlight-source-lisp"><pre>(ql:quickload '(hunchentoot cl-json))
(hunchentoot:start (make-instance 'hunchentoot:easy-acceptor :port <span class="pl-c1">4242</span>))
<span class="pl-c"><span class="pl-c">;</span>;Create a class called people.</span>
(<span class="pl-k">defclass</span> <span class="pl-en">people</span>()
  ((name :accessor name
         :initarg :name)
   (language :accessor language
             :initarg :language)
   (bio :accessor bio
        :initarg :bio)))
<span class="pl-c"><span class="pl-c">;</span>;Define a list</span>
(<span class="pl-k">defvar</span> <span class="pl-smi">*people-list*</span> <span class="pl-c1">nil</span>)
<span class="pl-c"><span class="pl-c">;</span>;Store the people instance</span>
(<span class="pl-k">defun</span> <span class="pl-en">store-people</span> (people)
  (push people <span class="pl-smi">*people-list*</span>)
  people)
<span class="pl-c"><span class="pl-c">;</span>;Make a people instance by name</span>
(<span class="pl-k">defun</span> <span class="pl-en">make-people</span> (name)
  (make-instance
   'people
   :name name
   :language <span class="pl-s"><span class="pl-pds">"</span>English<span class="pl-pds">"</span></span>
   :bio (<span class="pl-c1">format</span> <span class="pl-c1">nil</span> <span class="pl-s"><span class="pl-pds">"</span>I am ~a's colon. I get cancer, I kill ~a. <span class="pl-pds">"</span></span> name name)))
<span class="pl-c"><span class="pl-c">;</span>;Dynamic build a people, and response back in JSON.</span>
(hunchentoot:define-easy-handler (say-you :uri <span class="pl-s"><span class="pl-pds">"</span>/you<span class="pl-pds">"</span></span>) (name)
  (<span class="pl-c1">setf</span> (hunchentoot:content-type*) <span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span>)
  (json:encode-json-to-string
   (store-people
    (make-people name))))
(hunchentoot:define-easy-handler (people :uri <span class="pl-s"><span class="pl-pds">"</span>/people<span class="pl-pds">"</span></span>) ()
  (<span class="pl-c1">setf</span> (hunchentoot:content-type*) <span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span>)
  (json:encode-json-to-string
   <span class="pl-smi">*people-list*</span>))</pre></div>

<p>Вы можете сохранить приведенный выше код в файл <code>storage-server.lisp</code>, а 
затем загрузить его с помощью <code>sbcl --load storage-server.lisp</code> (не забудьте 
закрыть все остальные REPL, чтобы избежать конфликтов номеров портов).</p>

<p>Затем сначала щелкните эти ссылки: <a href="http://localhost:4242/you?name=Jack" rel="nofollow">Jack</a>, <a href="http://localhost:4242/you?name=Tyler" rel="nofollow">Tyler</a>, <a href="http://localhost:4242/you?name=Marla" rel="nofollow">Marla</a>.</p>

<p>А затем проверьте здесь, сохранены ли они: <a href="http://localhost:4242/people" rel="nofollow">http://localhost:4242/people</a>.</p>

<p>Что случилось? Это просто работает. </p>

<p><strong>Какие данные? Вы хотите сохранить их на диске?</strong></p>

<p>SЕсли мы решили не использовать продукт базы данных, то как сохранить данные на диск 
и легко их восстановить? Давайте попробуем <a href="http://hillside.net/sugarloafplop/papers/5.pdf" rel="nofollow">OBJECT PREVALENCE</a>, это означает, что мы собираемся сделать снимок 
текущей памяти и сохранить его как файл, а затем восстановить их в любое время.</p>

<p>Конечно, мы можем создать нашу собственную реализацию, но благодаря 
[Sven Van Caekenberghe] (http://www.cliki.net/Sven Van Caekenberghe) мы можем использовать 
<a href="https://common-lisp.net/project/cl-prevalence/" rel="nofollow">CL-PREVALENCE</a>. 
Он не очень хорошо документирован как <a href="http://weitz.de/hunchentoot/" rel="nofollow">Hunchentoot</a>, но у нас есть <a href="https://common-lisp.net/project/cl-prevalence/CL-PREVALENCE.html" rel="nofollow">API</a> и исходный код, не так ли?</p>

<ul>
<li>Во-первых, добавьте <code>cl-prevalence</code> в список загрузки quicklisp:</li>
</ul>
<div class="highlight highlight-source-lisp"><pre>(ql:quickload '(hunchentoot cl-json cl-prevalence))</pre></div>
<ul>
<li>Затем инициализируйте вашу систему prevalence(распространенности) (мы должны сначала
определить класс, который будет использоваться системой prevalence(распространенности)): </li>
</ul>
<div class="highlight highlight-source-lisp"><pre><span class="pl-c"><span class="pl-c">;</span>;We add "id" to the people class, the prevalence system will need it.</span>
(<span class="pl-k">defclass</span> <span class="pl-en">people</span>()
  ((id :reader id
       :initarg :id)
   (name :accessor name
         :initarg :name)
   (language :accessor language
             :initarg :language)
   (bio :accessor bio
        :initarg :bio)))
<span class="pl-c"><span class="pl-c">;</span>;Init the system</span>
(<span class="pl-k">defvar</span> <span class="pl-smi">*p-system*</span> (cl-prevalence:make-prevalence-system <span class="pl-c1">#p"./p-system/"</span>))
<span class="pl-c"><span class="pl-c">;</span>;Create counter if not exists</span>
(<span class="pl-k">or</span> (&gt; (length (cl-prevalence:find-all-objects <span class="pl-smi">*p-system*</span> 'people)) <span class="pl-c1">0</span>)
	(cl-prevalence:tx-create-id-counter <span class="pl-smi">*p-system*</span>))</pre></div>
<ul>
<li>Измените исходную функцию <code>make-people</code>
</li>
</ul>
<div class="highlight highlight-source-lisp"><pre>(<span class="pl-k">defun</span> <span class="pl-en">make-people</span> (name)
  (cl-prevalence:tx-create-object
   <span class="pl-smi">*p-system*</span>
   'people
   `((name ,name)
     (language ,<span class="pl-s"><span class="pl-pds">"</span>English<span class="pl-pds">"</span></span>)
     (bio ,(<span class="pl-c1">format</span> <span class="pl-c1">nil</span> <span class="pl-s"><span class="pl-pds">"</span>I am ~a's colon. I get cancer, I kill ~a. <span class="pl-pds">"</span></span> name name)))))</pre></div>
<ul>
<li>

<p>Удалите функцию <code>store-people</code> и переменную <code>*people-list*</code>, 
потому что данные автоматически сохраняются в системе prevalence, когда мы вызываем 
<code>make-people</code>.</p>

</li>
<li>

<p>Измените наши контроллеры </p>

</li>
</ul>
<div class="highlight highlight-source-lisp"><pre><span class="pl-c"><span class="pl-c">;</span>;Dynamic build a people, and response back in JSON.</span>
(hunchentoot:define-easy-handler (say-you :uri <span class="pl-s"><span class="pl-pds">"</span>/you<span class="pl-pds">"</span></span>) (name)
  (<span class="pl-c1">setf</span> (hunchentoot:content-type*) <span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span>)
  (json:encode-json-to-string
   (make-people name)))
<span class="pl-c"><span class="pl-c">;</span>;Get all the people in our prevalence system</span>
(hunchentoot:define-easy-handler (people :uri <span class="pl-s"><span class="pl-pds">"</span>/people<span class="pl-pds">"</span></span>) ()
  (<span class="pl-c1">setf</span> (hunchentoot:content-type*) <span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span>)
  (json:encode-json-to-string
   (cl-prevalence:find-all-objects <span class="pl-smi">*p-system*</span> 'people)))</pre></div>
<ul>
<li>И наконец мы получили вот это </li>
</ul>
<div class="highlight highlight-source-lisp"><pre>(ql:quickload '(hunchentoot cl-json cl-prevalence))
<span class="pl-c"><span class="pl-c">;</span>;Create a class called people.</span>
(<span class="pl-k">defclass</span> <span class="pl-en">people</span>()
  ((id :reader id
       :initarg :id)
   (name :accessor name
         :initarg :name)
   (language :accessor language
             :initarg :language)
   (bio :accessor bio
        :initarg :bio)))
<span class="pl-c"><span class="pl-c">;</span>;Init the system</span>
(<span class="pl-k">defvar</span> <span class="pl-smi">*p-system*</span> (cl-prevalence:make-prevalence-system <span class="pl-c1">#p"./p-system/"</span>))
<span class="pl-c"><span class="pl-c">;</span>;Create counter if not exists</span>
(<span class="pl-k">or</span> (&gt; (length (cl-prevalence:find-all-objects <span class="pl-smi">*p-system*</span> 'people)) <span class="pl-c1">0</span>)
    (cl-prevalence:tx-create-id-counter <span class="pl-smi">*p-system*</span>))
(hunchentoot:start (make-instance 'hunchentoot:easy-acceptor :port <span class="pl-c1">4242</span>))
<span class="pl-c"><span class="pl-c">;</span>;Make and sotre a people instance by name</span>
(<span class="pl-k">defun</span> <span class="pl-en">make-people</span> (name)
  (cl-prevalence:tx-create-object
   <span class="pl-smi">*p-system*</span>
   'people
   `((name ,name)
     (language ,<span class="pl-s"><span class="pl-pds">"</span>English<span class="pl-pds">"</span></span>)
     (bio ,(<span class="pl-c1">format</span> <span class="pl-c1">nil</span> <span class="pl-s"><span class="pl-pds">"</span>I am ~a's colon. I get cancer, I kill ~a. <span class="pl-pds">"</span></span> name name)))))
<span class="pl-c"><span class="pl-c">;</span>;Dynamic build a people, and response back in JSON.</span>
(hunchentoot:define-easy-handler (say-you :uri <span class="pl-s"><span class="pl-pds">"</span>/you<span class="pl-pds">"</span></span>) (name)
  (<span class="pl-c1">setf</span> (hunchentoot:content-type*) <span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span>)
  (json:encode-json-to-string
   (make-people name)))
<span class="pl-c"><span class="pl-c">;</span>;Get all the people in our prevalence system</span>
(hunchentoot:define-easy-handler (people :uri <span class="pl-s"><span class="pl-pds">"</span>/people<span class="pl-pds">"</span></span>) ()
  (<span class="pl-c1">setf</span> (hunchentoot:content-type*) <span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span>)
  (json:encode-json-to-string
   (cl-prevalence:find-all-objects <span class="pl-smi">*p-system*</span> 'people)))</pre></div>
<ul>
<li>Save the code above to file <code>p-storage-server.lisp</code>, and then loaded with <code>sbcl --load p-storage-server.lisp</code> (remember to quit all the other REPLs to avoid port number conflicts).</li>
</ul>

<p>Затем сначала щелкните эти ссылки: [Robert Paulson](<a href="http://localhost:4242/you?name=Robert" rel="nofollow">http://localhost:4242/you?name=Robert</a> Paulson), <a href="http://localhost:4242/you?name=Tyler" rel="nofollow">Tyler</a>, <a href="http://localhost:4242/you?name=Jack" rel="nofollow">Jack</a>, <a href="http://localhost:4242/you?name=Lou" rel="nofollow">Lou</a>.</p>

<p>А затем проверьте здесь, сохранены ли они: <a href="http://localhost:4242/people" rel="nofollow">http://localhost:4242/people</a>.</p>

<p>Что случилось? Он просто работает как  <code>*people-list*</code>.</p>

<p><strong>Чтобы стать свидетелем чуда</strong></p>

<p>Сейчас, наберите <code>(cl-prevalence:snapshot *p-system*)</code> в вашем REPL, и 
нажмите <kbd>Enter</kbd>.</p>

<p>Затем закройте все REPL и закройте все вкладки в браузере (кроме этой).</p>

<p>Перезагрузите код: <code>sbcl --load p-storage-server.lisp</code>, затем просмотрите страницу:
<a href="http://localhost:4242/people" rel="nofollow">http://localhost:4242/people</a>.</p>

<p>Вы видите Тайлера? CL-PREVALENCE автоматически загрузил снимок для нас, мы даже не заметили</p>

<h4>
<a name="modern-client" class="anchor" href="#modern-client" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Современный клиент</h4>

<p>Я создал один файл в качестве клиента, вы можете <a href="https://vitovan.com/lispweb3/lispweb3-client.htm">загрузить</a> и изменить его, это просто смесь HTML / JavaScript и CSS.
</p>

<p><strong>Тогда что осталось?</strong></p>

<p>Нам нужно обслужить этот файл, давайте проверим <a href="http://weitz.de/hunchentoot/#start" rel="nofollow">документ Hunchentoot</a>. Здесь мы видим:</p>

<blockquote>

<p>...... The location of the document root directory can be specified 
when creating a new ACCEPTOR instance by the way of the 
ACCEPTOR-DOCUMENT-ROOT. . ......</p>

</blockquote>

<p>- <a href="http://weitz.de/hunchentoot/" rel="nofollow">Hunchentoot</a></p>

<p>Итак, что нам нужно сделать, это просто создать каталог с именем <code>www</code> на 
том же уровне <code>p-storage-server.lisp</code>, а затем загрузить в него файл HTM: </p>

<div class="highlight highlight-source-lisp"><pre>wget -P www https://vitovan.com/lispweb3/lispweb3-client.htm</pre></div>

<p>Затем измените: </p>

<div class="highlight highlight-source-lisp"><pre>(hunchentoot:start (make-instance 'hunchentoot:easy-acceptor :port <span class="pl-c1">4242</span>))</pre></div>

<p>На это:</p>

<div class="highlight highlight-source-lisp"><pre>(hunchentoot:start (make-instance 'hunchentoot:easy-acceptor :port <span class="pl-c1">4242</span>
                                  :document-root <span class="pl-s"><span class="pl-pds">"</span>www/<span class="pl-pds">"</span></span>))</pre></div>

<p>Тогда Hunchentoot будет использовать "www/" в текущей папке в качестве корневого каталога,
теперь попробуйте перезагрузить наш код.</p>

<p>Затем посетите: <a href="http://localhost:4242/lispweb3-client.htm" rel="nofollow">http://localhost:4242/lispweb3-client.htm</a>, вы получили то, что хотите.</p>

<p>Предложение: вы действительно не хотите использовать Hunchentoot для обслуживания ваших
статических файлов, не так ли? Вам следует попробовать <a href="https://www.nginx.com/" rel="nofollow">Nginx</a> как <a href="https://www.nginx.com/resources/admin-guide/reverse-proxy/" rel="nofollow">PROXY</a> и сделать свой Hunchentoot только сервером приложений. </p>

<h3>
<a name="before-the-end" class="anchor" href="#before-the-end" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Перед тем как закончить</h3>

<p>Я должен сказать, что солгал вам о том, как мы делаем кодирование на Common Lisp для 
удобства объяснения.</p>

<ul>
<li>

<p>Обычно мы не загружаем такой файл <code>sbcl --load xxx.lisp</code>. Мы непосредственно 
вводим и вычисляем в REPL, это очаровательная часть Lisp.</p>

</li>
<li>

<p>Обычно мы не набираем и не выполняем eval напрямую в REPL, созданном <code>sbcl</code>, 
это больно. Вы должны попробовать <a href="https://www.common-lisp.net/project/slime/" rel="nofollow">SLIME</a>, это делает жизнь намного проще.</p>

</li>
</ul>

<p>И вот еще:</p>

<p>Если вы хотите заниматься серфингом в мире Lisp в стиле Lisp, <a href="https://www.gnu.org/software/emacs/" rel="nofollow">Emacs</a> - ваш лазерный меч, мой юный джедай. </p>

<h3>
<a name="references" class="anchor" href="#references" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Ссылки</h3>

<p>Thanks to:</p>

<ul>
<li>

<p><a href="http://www.adamtornhill.com/articles/lispweb.htm" rel="nofollow">Lisp for the Web</a> by Adam Tornhill, April 2008</p>

</li>
<li>

<p><a href="http://msnyder.info/posts/2011/07/lisp-for-the-web-part-ii/" rel="nofollow">Lisp for the Web, Part II</a> by Matthew Snyder, July 2011</p>

</li>
</ul>

<p>I wish this piece of work could be:</p>

<ul>
<li>
<a href="https://vitovan.com/lispweb3.html" rel="nofollow">Lisp for the Web, Part III</a> by Vito Van, August 2015</li>
</ul>

<p>That would be a great honor to me.</p>

<p>Thanks for reading.</p>

<p><strong>Footnotes:</strong></p>

<p><a name="fn1">[1]</a> Hunchentoot is <strong>NOT</strong> a good choice for now:</p>

<blockquote>

<p><strong>Stop using Hunchentoot directly.</strong> Use Clack, or even better, one of the frameworks built on it.</p>

</blockquote>

<p>- <a href="http://eudoxia.me/article/common-lisp-sotu-2015/" rel="nofollow">State of the Common Lisp Ecosystem, 2015 </a></p>

<p><del>( 2015/09 revision: After playing around Clack, I do not like it, check this <a href="https://gist.github.com/c41e1940ab0a3135dc6c">https://gist.github.com/c41e1940ab0a3135dc6c</a>)</del></p>

<p>(2016/08 revision: Clack is not so bad, I was just being stupid last year, and this article is... kind of stupid)</p>

<hr>

<p>License: GNU GPL v2.0</p>

<p>Discuss on HN: <a href="https://news.ycombinator.com/item?id=10102549" rel="nofollow">https://news.ycombinator.com/item?id=10102549</a></p>

<p>This piece of work has been updated as the book <a href="https://www.gitbook.com/book/vitovan/lispweb3" rel="nofollow">Lisp for the Modern Web</a>, you can buy it from <a href="https://www.gitbook.com/book/vitovan/lispweb3/details" rel="nofollow">GitBook</a>.</p>

            </div>
        </div>

</body></html>